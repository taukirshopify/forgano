{% comment %} snippet/content-protect.liquid {% endcomment %} {% assign __t = true %} {% assign __a2 = "_r5LmG" %} {% assign __t3 = "hV5mG" %} {% assign access_granted = __t %} {% assign _p = "page" %} {% assign __f = false %} {% assign __t1 = "PmJ76" %} {% assign __p = "product" %} {% assign __a1 = "_ysgfIgAj2D" %} {% assign __c = "collection" %} {% assign __t2 = "Y4Lzu" %} {% if shop.metafields.reveal_lock_manager.allow_app %} {% include 'item-rules' %} {% assign pwds = cart.attributes[__a1] | split: ',' %} {% assign cgl = cart.attributes[__a2] %} {% assign _vpwds = "" | split: ", " %} {% assign _vagls = "" | split: ", " %} {% assign _vegls = "" | split: ", " %} {% assign ulTypes = "" | split: ", " %} {% assign eld = __f %} <script type="text/javascript">;const lvUpdateCart=function(t){t=t||{};return fetch('/cart/update.js',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},credentials:'same-origin',body:JSON.stringify(t)})};</script> {% if template.name contains __p %} {% assign __d = _pt %} {% assign __i = product.id | append: "" %} {% assign lcols = _cn | split: '$;$' %} {% for lcol in lcols %} {% assign lc = lcol | split: '$&$' %} {% assign lc_id = lc[0] | plus: 0 %} {% assign proCols = product.collections | where: "id", lc_id %} {% assign ilcp = __f %} {% for proCol in proCols %} {% if lcol contains 'selected' %} {% if lcol contains __i %} {% assign ilcp = __t %} {% endif %} {% elsif lcol contains 'all' %} {% assign ilcp = __t %} {% endif %} {% endfor %} {% if ilcp %} {% assign access_granted = __f %} {% unless ulTypes contains lc[2] %} {% assign ulType = lc[2] | split: ", " %} {% assign ulTypes = ulTypes | concat: ulType %} {% endunless %} {% if lc[2] == __t1 %} {% assign lockPasscode = lc[1] | split: ", " %} {% assign _vpwds = _vpwds | concat: lockPasscode %} {% elsif lc[2] == __t3 %} {% assign lgl = lc[4] | split: ":" %} {% if lc[3] == 'a' %} {% assign _vagls = _vagls | concat: lgl %} {% elsif lc[3] == 'e' %} {% assign _vegls = _vegls | concat: lgl %} {% endif %} {% endif %} {% endif %} {% endfor %} {% elsif template.name contains __c %} {% assign __d = _cn %} {% assign __i = collection.id | append: "" %} {% elsif template.name contains _p %} {% assign __d = _pe %} {% assign __i = page.id | append: "" %} {% endif %} {% if __d contains __i %} {% assign data = __d | split: '$;$' %} {% for d in data %} {% assign s = d | split: '$&$' %} {% if __i == s[0] %} {% assign access_granted = __f %} {% unless ulTypes contains s[2] %} {% assign ulType = s[2] | split: ", " %} {% assign ulTypes = ulTypes | concat: ulType %} {% endunless %} {% if s[2] == __t1 %} {% assign lockPasscode = s[1] | split: ", " %} {% assign _vpwds = _vpwds | concat: lockPasscode %} {% elsif s[2] == __t3 %} {% assign lgl = s[4] | split: ":" %} {% if s[3] == 'a' %} {% assign _vagls = _vagls | concat: lgl %} {% elsif s[3] == 'e' %} {% assign _vegls = _vegls | concat: lgl %} {% endif %} {% endif %} {% break %} {% endif %} {%- endfor -%} {% endif %} {% if _pt contains __t3 or _cn contains __t3 or _pe contains __t3 %} {% unless cgl %} {% if ulTypes contains __t3 %} {% assign eld = __t %} {% endif %} <script type="text/javascript">;fetch('/a/frontend/allow',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:{}}).then(response=>{return response.json()}).then(data=>{var a=data.allow,g={{__a2|json}},l={{eld}};lvUpdateCart({attributes:{[g]:a}}).then(function(a){if(l){location.reload()}})});</script> {% endunless %} {% endif %} {% unless access_granted %} {% assign checkRGL = __t %} {% if ulTypes contains __t3 %} {% assign checkRGL = __f %} {% assign len = cgl | first %} {% assign rs = cgl | slice: 0, len %} {% assign cgl = cgl | remove_first: rs %} {% for _vagl in _vagls %} {% if _vagl == cgl %} {% assign checkRGL = __t %} {% break %} {% endif %} {% endfor %} {% for _vegl in _vegls %} {% if _vegl == cgl %} {% assign checkRGL = __f %} {% break %} {% else %} {% if _vagls.size == 0 %} {% assign checkRGL = __t %} {% endif %} {% endif %} {% endfor %} {% endif %} {% if checkRGL %} {% assign oL = __f %} {% if ulTypes contains __t1 %} {% assign oL = __t %} {% for vpwd in _vpwds %} {% if pwds contains vpwd %} {% assign access_granted = __t %} {% endif %} {% endfor %} {% endif %} {% if ulTypes contains __t2 %} {% assign oL = __t %} {%- if customer -%} {% assign access_granted = __t %} {% endif %} {% endif %} {% unless oL %} {% assign access_granted = __t %} {% endunless %} {% endif %} {% endunless %} {% if access_granted %} {% else %} {% capture content_for_layout %} {% if eld %} <div class="lv-center"><div><img class="lv-logo" height="100" width="100" src="https://cdn.shopify.com/s/files/1/0646/1400/7019/files/loading.gif"></div></div> {% else %} <div class="lv-center"><div><img class="lv-logo" height="54" width="54" src="https://cdn.shopify.com/s/files/applications/564161e7284eafee20c05121e0acede0_512x512.png"></div></div> {% if ulTypes contains __t3 and checkRGL == __f %} <div class="lv-center"><span>Sorry, the requested content/page is not available in your location.</span></div> {% else %} {% if ulTypes contains __t1 %} <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.4/fetch.min.js"></script><div class="lv-center"><span>To view this content, <br/> you are requested to enter the Passcode.</span></div><form id="lvForm" onSubmit="lvPasscodeVerify(); return false;" action="#"><input type="hidden" name="data_id" value="{{__i}}"><input id="lockPasscode" type="password" placeholder="Enter passcode" name="passcode" required autofocus/><input type="submit" id="passcodeSubmit" value="Go"/><p id="passcodeError">Incorrect passcode. Please try again.</p></form><style>#lvForm{text-align:center;display:flex;align-items:center;justify-content:center;max-width:400px;margin:0 auto;flex-wrap:wrap;margin-bottom:10px}#lvForm input[type=submit]{padding:10px 12px 10px 12px;font-weight:500;border-left:none;cursor:pointer;width:20%}#lvForm input[type=submit][disabled]{cursor:not-allowed !important}#lockPasscode{padding:10px 12px 10px 12px;width:80%;box-shadow:none}#lockPasscode:focus-visible{outline:-webkit-focus-ring-color auto 1px;outline-offset:0px}#passcodeError{color:red;width:100%;margin-top:10px;display:none}</style><script type="text/javascript">;const lvGetCart=function(){return fetch('/cart.js',{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json'},credentials:'same-origin'})};const lvPasscodeVerify=function(){const errorMessage=document.getElementById('passcodeError');errorMessage.style.display='none';const submitElement=document.getElementById('passcodeSubmit');submitElement.setAttribute('disabled',!0);const submittedPasscode=document.getElementsByName('passcode')[0].value;const formDataJSON={shopify_id:document.getElementsByName('data_id')[0].value,passcode:submittedPasscode};fetch('/a/frontend/verify_lock',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(formDataJSON)}).then(function(e){if(e.status==200){lvGetCart().then(cart=>cart.json()).then((cart)=>{var s=submittedPasscode,t={{__a1|json}};if(cart.attributes[t]){s+=','+cart.attributes[t]};lvUpdateCart({attributes:{[t]:s}}).then(function(t){location.reload()})})}
else{errorMessage.style.display='block';submitElement.removeAttribute('disabled')}})};</script> {% endif %} {% if ulTypes contains __t2 %} {% if ulTypes contains __t1 %} <div class="lv-center"><u style="color:#aa0707">OR</u></div> {% endif %} <div class="lv-center"><span>To view this content, <br/> you are requested to login, please click here to <a target="_blank" href="{{ routes.account_login_url }}">Login</a></span></div> {% endif %} {% endif %} {% endif %} <style>.lv-center{text-align:center;margin-bottom:10px;margin-top:15px;letter-spacing:0;line-height:1.4;font-weight:600}.lv-logo{display:block;margin:0 auto}</style> {% endcapture %} {% endif %} {% endif %}